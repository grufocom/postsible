---
# Postsible Mailserver Configuration (Public)
# Sensitive data is in vault.yml (encrypted)

# Common Settings
common_timezone: "Europe/Vienna"
common_locales:
  - de_AT.UTF-8
  - en_US.UTF-8

common_default_locale: "de_AT.UTF-8"

# Mail Configuration
mail_primary_domain: "example.com"
mail_virtual_domains:
  - example.com

mail_admin_email: "admin@example.com"
mail_letsencrypt_email: "admin@example.com"
mail_ssl_cert_path: "/etc/letsencrypt/live/{{ mail_primary_domain }}"

# MariaDB Settings (Non-Sensitive)
mariadb_database: "mailserver"
mariadb_user: "mailuser"
mariadb_host: "localhost"

mail_imap_port: 993
mail_smtp_port: 465

# MariaDB Passwords (from Vault)
mariadb_root_password: "{{ vault_mariadb_root_password }}"
mariadb_password: "{{ vault_mariadb_password }}"

# Postfix Settings
postfix_myhostname: "{{ common_hostname }}"
postfix_mydomain: "{{ mail_primary_domain }}"
postfix_myorigin: "$mydomain"
postfix_inet_interfaces: "all"
postfix_inet_protocols: "ipv4"
# Subaddressing (plus addressing)
postfix_recipient_delimiter: "+"

# Dovecot Settings
dovecot_mail_location: "maildir:/srv/imap/%d/%n/"
dovecot_protocols: "imap lmtp sieve"

# Rspamd Settings
rspamd_webui_enabled: true
rspamd_webui_password: "{{ vault_rspamd_webui_password }}"

# SnappyMail Settings
snappymail_domain: "{{ mail_primary_domain }}"
snappymail_admin_user: "admin"
snappymail_admin_password: "{{ vault_snappymail_admin_password }}"

# Infcloud Settings
infcloud_use_subdomain: false
infcloud_base_path: "/cal"
#infcloud_subdomain: "cal"  # Results in cal.{{ mail_primary_domain }}

# Localization
infcloud_language: "de_DE"  # Available: en_US, de_DE, fr_FR, etc.
infcloud_timezone: "Europe/Vienna"
infcloud_first_day_of_week: 1  # Monday

# Features
infcloud_enable_calendar: true
infcloud_enable_contacts: true
infcloud_enable_projects: false  # Tasks/TODOs (needs CalDAV VTODO support)

# Branding
infcloud_title: "My Company Calendar"
infcloud_logo_text: "{{ mail_primary_domain }}"

# Nginx Settings
nginx_worker_processes: "auto"
nginx_worker_connections: 1024

# UFW Firewall Settings
ufw_ssh_port: 22
ufw_ssh_trusted_ips:
  - ip: "999.999.999.999"
    comment: "SSH from your trusted ip"
  # Add your own IPs here:
  # - ip: "YOUR_HOME_IP"
  #   comment: "Home Office"
  # - ip: "YOUR_OFFICE_IP/24"
  #   comment: "Office Network"

ufw_enable_smtps: true   # Port 465 (some clients need SMTP over SSL)
ufw_enable_pop3s: false  # Port 995 (usually not needed)
ufw_rate_limit_smtp: false  # Set to true for SMTP rate limiting
ufw_logging_level: "low"

# Fail2ban Settings
fail2ban_bantime: 3600
fail2ban_findtime: 600
fail2ban_maxretry: 5
fail2ban_destemail: "{{ mail_admin_email }}"

# ESET ICAP Settings
eset_icap_enabled: false
eset_icap_host: "localhost"
eset_icap_port: 1344
