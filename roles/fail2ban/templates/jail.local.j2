# Fail2ban jail.local configuration
# Managed by Ansible - DO NOT EDIT MANUALLY

[DEFAULT]
# Ban settings
bantime  = {{ fail2ban_bantime | default('3600') }}
findtime = {{ fail2ban_findtime | default('600') }}
maxretry = {{ fail2ban_maxretry | default('5') }}

# Action to take
banaction = ufw
action = %(action_mwl)s

# Email settings
{% if fail2ban_enable_email | default(true) %}
destemail = {{ fail2ban_destemail | default(mail_admin_email) }}
sender = fail2ban@{{ mail_primary_domain }}
mta = sendmail
{% endif %}

# Ignore own IPs
ignoreip = 127.0.0.1/8 ::1
{% if fail2ban_whitelist_ips | default([]) %}
{% for ip_entry in fail2ban_whitelist_ips %}
           {{ ip_entry }}
{% endfor %}
{% endif %}

# Backend
backend = systemd
